{% extends 'base/panel_frame.html' %}

{% block nav_operator %}fms-active{% endblock %}

{% block content %}

{% include 'helpers/message.html' %}

<div class="mt-3 px-3">
    <div class="row">
        <div class="col-sm-6">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="{{ request.META.HTTP_REFERER }}"><i class="fa fa-arrow-left"></i> Back</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Update Operator Record</li>
                </ol>
            </nav>
        </div>
    </div>
    <form method="post">
        {% csrf_token %}
        <div class="row mt-4">
            <div class="col-sm-2">
                <div class="list-group list-group-flush">
                    <a class="list-group-item-action list-group-item-light btn btn-basic-info info-active" href="javascript:void(0);">
                            <table>
                                <tr>
                                    <td><i class="fas fa-address-card"></i> Basic Information</td>
                                </tr>
                            </table>
                    </a>

                    <a class="list-group-item-action list-group-item-light btn btn-contact-info" href="javascript:void(0);">
                        <table>
                            <tr>
                                <td> <span><i class="fas fa-images"></i> Contact Information</span></td>
                            </tr>
                        </table>
                    </a>

                    <a class="list-group-item-action list-group-item-light btn btn-personal-info" href="javascript:void(0);">
                        <table>
                            <tr>
                                <td> <i class="fas fa-file-alt"></i> Personal Information</td>
                            </tr>
                        </table>
                    </a>
                    
                </div>
            </div>
            <div class="col-sm-10">
                <div class="basic-info-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5>Basic Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.firstname.label }}</label>
                                    <div class="col-sm-4">
                                    {{ operatorForm.firstname }}

                                    {% if operatorForm.firstname.help_text %}
                                    <small class="text-muted">{{ operatorForm.firstname.help_text}}</small>
                                    {% endif %}

                                    {% if operatorForm.firstname.errors %}
                                    {% for error in operatorForm.firstname.errors %}
                                    <small class="alert-danger">{{ error }}</small>
                                    {% endfor %}
                                    {% endif %}
                                    </div>

                                    <label class="col-sm-1 col-form-label" style="text-align: right;">{{ operatorForm.middlename.label }}</label>
                                    <div class="col-sm-4">
                                        {{ operatorForm.middlename }}

                                        {% if operatorForm.middlename.help_text %}
                                        <small class="text-muted">{{ operatorForm.middlename.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.middlename.errors %}
                                        {% for error in operatorForm.middlename.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.lastname.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.lastname }}

                                        {% if operatorForm.lastname.help_text %}
                                        <small class="text-muted">{{ operatorForm.lastname.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.lastname.errors %}
                                        {% for error in operatorForm.lastname.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.email.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.email }}

                                        {% if operatorForm.email.help_text %}
                                        <small class="text-muted">{{ operatorForm.email.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.email.errors %}
                                        {% for error in operatorForm.email.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.contact_no.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.contact_no }}

                                        {% if operatorForm.contact_no.help_text %}
                                        <small class="text-muted">{{ operatorForm.contact_no.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.contact_no.errors %}
                                        {% for error in operatorForm.contact_no.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;"></label>
                                    {% for radio in operatorForm.operator_type %}
                                    <div class="col-sm-1">
                                        {{ radio }}
                                    </div>
                                    {% endfor %}
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;"></label>
                                    <div class="col-sm-3">
                                        {% if operatorForm.operator_type.help_text %}
                                        <small class="text-muted">{{ operatorForm.operator_type.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.operator_type.errors %}
                                        {% for error in operatorForm.operator_type.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="contact-info-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5>Contact Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ contactForm.fullname.label }}</label>
                                    <div class="col-sm-9">
                                    {{ contactForm.fullname }}

                                    {% if contactForm.fullname.help_text %}
                                    <small class="text-muted">{{ contactForm.fullname.help_text}}</small>
                                    {% endif %}

                                    {% if contactForm.fullname.errors %}
                                    {% for error in contactForm.fullname.errors %}
                                    <small class="alert-danger">{{ error }}</small>
                                    {% endfor %}
                                    {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ contactForm.contact_no.label }}</label>
                                    <div class="col-sm-9">
                                    {{ contactForm.contact_no }}

                                    {% if contactForm.contact_no.help_text %}
                                    <small class="text-muted">{{ contactForm.contact_no.help_text}}</small>
                                    {% endif %}

                                    {% if contactForm.contact_no.errors %}
                                    {% for error in contactForm.contact_no.errors %}
                                    <small class="alert-danger">{{ error }}</small>
                                    {% endfor %}
                                    {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ contactForm.address.label }}</label>
                                    <div class="col-sm-9">
                                    {{ contactForm.address }}
                                    
                                    {% if contactForm.address.help_text %}
                                    <small class="text-muted">{{ contactForm.address.help_text}}</small>
                                    {% endif %}

                                    {% if contactForm.address.errors %}
                                    {% for error in contactForm.address.errors %}
                                    <small class="alert-danger">{{ error }}</small>
                                    {% endfor %}
                                    {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ contactForm.relation.label }}</label>
                                    <div class="col-sm-9">
                                    {{ contactForm.relation }}
                                    
                                    {% if contactForm.relation.help_text %}
                                    <small class="text-muted">{{ contactForm.relation.help_text}}</small>
                                    {% endif %}

                                    {% if contactForm.relation.errors %}
                                    {% for error in contactForm.relation.errors %}
                                    <small class="alert-danger">{{ error }}</small>
                                    {% endfor %}
                                    {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="personal-info-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5>Personal Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.position.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.position }}
                                    
                                        {% if operatorForm.position.help_text %}
                                        <small class="text-muted">{{ operatorForm.position.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.position.errors %}
                                        {% for error in operatorForm.position.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.birthdate.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.birthdate }}
                                    
                                        {% if operatorForm.birthdate.help_text %}
                                        <small class="text-muted">{{ operatorForm.birthdate.help_text}}</small>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-2">
                                        <span class="text-muted">Employee Details</span>
                                    </div>
                                </div>

                                <hr>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.employee_id.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.employee_id }}
                                    
                                        {% if operatorForm.employee_id.help_text %}
                                        <small class="text-muted">{{ operatorForm.employee_id.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.employee_id.errors %}
                                        {% for error in operatorForm.employee_id.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.date_employed.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.date_employed }}
                                    
                                        {% if operatorForm.date_employed.help_text %}
                                        <small class="text-muted">{{ operatorForm.date_employed.help_text}}</small>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ operatorForm.area.label }}</label>
                                    <div class="col-sm-9">
                                        {{ operatorForm.area }}
                                    
                                        {% if operatorForm.area.help_text %}
                                        <small class="text-muted">{{ operatorForm.area.help_text}}</small>
                                        {% endif %}

                                        {% if operatorForm.area.errors %}
                                        {% for error in operatorForm.area.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-2">
                                        <span class="text-muted">Operator Details <i>(If applicable)</i></span>
                                    </div>
                                </div>

                                <hr>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ licenseForm.license_no.label }}</label>
                                    <div class="col-sm-9">
                                        {{ licenseForm.license_no }}
                                    
                                        {% if licenseForm.license_no.help_text %}
                                        <small class="text-muted">{{ licenseForm.license_no.help_text}}</small>
                                        {% endif %}

                                        {% if licenseForm.license_no.errors %}
                                        {% for error in licenseForm.license_no.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ licenseForm.restriction.label }}</label>
                                    <div class="col-sm-9">
                                        {{ licenseForm.restriction }}
                                    
                                        {% if licenseForm.restriction.help_text %}
                                        <small class="text-muted">{{ licenseForm.restriction.help_text}}</small>
                                        {% endif %}

                                        {% if licenseForm.restriction.errors %}
                                        {% for error in licenseForm.restriction.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ licenseForm.agency_code.label }}</label>
                                    <div class="col-sm-9">
                                        {{ licenseForm.agency_code }}
                                    
                                        {% if licenseForm.agency_code.help_text %}
                                        <small class="text-muted">{{ licenseForm.agency_code.help_text}}</small>
                                        {% endif %}

                                        {% if licenseForm.agency_code.errors %}
                                        {% for error in licenseForm.agency_code.errors %}
                                        <small class="alert-danger">{{ error }}</small>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label" style="text-align: right;">{{ licenseForm.expiration_date.label }}</label>
                                    <div class="col-sm-9">
                                        {{ licenseForm.expiration_date }}
                                    
                                        {% if licenseForm.expiration_date.help_text %}
                                        <small class="text-muted">{{ licenseForm.expiration_date.help_text}}</small>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="mt-4">

        <a href="{{ request.META.HTTP_REFERER }}" class="mx-4" style="text-decoration: none;">Cancel</a>
        <button type="submit" class="m-3 btn btn-primary float-end personal-info-tab" data-bs-toggle="modal" data-bs-target="#loaderModal">Save</button>
        <button type="button" class="m-3 btn btn-primary float-end btn-contact-info basic-info-tab">Next <i class="fa fa-arrow-right"></i></button>
        <button type="button" class="m-3 btn btn-primary float-end btn-personal-info contact-info-tab">Next <i class="fa fa-arrow-right"></i></button>
        <button type="button" class="m-3 btn btn-primary float-end btn-basic-info contact-info-tab"><i class="fa fa-arrow-left"></i> Previous</button>
        <button type="button" class="m-3 btn btn-primary float-end btn-contact-info personal-info-tab"><i class="fa fa-arrow-left"></i> Previous</button>
    </form>

    <script>
        $(document).ready(function(){
            $('.basic-info-tab').show();
            $('.contact-info-tab').hide();
            $('.personal-info-tab').hide();

            $('.btn-basic-info').click(function(){
                $('.basic-info-tab').show();
                $('.contact-info-tab').hide();
                $('.personal-info-tab').hide();

                $('.btn-basic-info').addClass('info-active');
                $('.btn-contact-info').removeClass('info-active');
                $('.btn-personal-info').removeClass('info-active');
            });

            $('.btn-contact-info').click(function(){
                $('.basic-info-tab').hide();
                $('.contact-info-tab').show();
                $('.personal-info-tab').hide();

                $('.btn-basic-info').removeClass('info-active');
                $('.btn-contact-info').addClass('info-active');
                $('.btn-personal-info').removeClass('info-active');
            });

            $('.btn-personal-info').click(function(){
                $('.basic-info-tab').hide();
                $('.contact-info-tab').hide();
                $('.personal-info-tab').show();

                $('.btn-basic-info').removeClass('info-active');
                $('.btn-contact-info').removeClass('info-active');
                $('.btn-personal-info').addClass('info-active');
            });
        });
    </script>
    
</div>

{% include 'helpers/modals.html' %}
{% endblock %}